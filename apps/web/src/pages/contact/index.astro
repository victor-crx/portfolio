---
const siteKey = import.meta.env.TURNSTILE_SITE_KEY ?? "";
---
<!doctype html><html lang="en"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="index,follow" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="theme-color" content="#0B0B0D" />
  <meta name="color-scheme" content="dark" />
  <title>Contact — Victor Lane</title>
  <meta name="description" content="Contact page for placeholder channels, inquiry context, and engagement notes." />
  <link rel="canonical" href="https://portfolio-6nh.pages.dev/contact/" />
  <link rel="stylesheet" href="/styles.css" />
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head><body data-page="contact">
  <a class="skip-link" href="#main-content">Skip to content</a><header class="site-header"><div class="container nav-wrap"><a class="brand" href="/" aria-label="Victor Lane home"><img src="/assets/logo.svg" alt="Victor Lane" width="220" height="40" decoding="async" /></a><button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="site-nav">Menu</button><ul class="nav-links" id="site-nav" aria-label="Primary"><li><a href="/">Home</a></li><li><a href="/work/">Work</a></li><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li></ul></div></header>
  <main id="main-content" class="section"><div class="container"><div class="section-head reveal" data-site-contact-intro><p class="kicker">Connect</p><h2 class="balance no-widow" data-site-contact-title>Contact</h2><p data-site-contact-subtitle>Use the form below to send an inquiry.</p></div>
  <aside class="contact-services" data-site-contact-services hidden></aside>
  <form class="contact-form" data-contact-form>
    <label>Inquiry Type<select name="inquiry_type"><option value="general">General</option><option value="project">Project</option><option value="speaking">Speaking</option></select></label>
    <label>Your name<input name="name" placeholder="Your name" required></label>
    <label>Your email<input name="email" type="email" placeholder="Your email" required></label>
    <label>Subject<input name="subject" placeholder="Subject" required></label>
    <label>Your message<textarea name="message" placeholder="Your message" required></textarea></label>
    <div class="cf-turnstile" data-sitekey={siteKey}></div>
    <button class="btn btn-primary" type="submit" data-contact-submit>Send inquiry</button>
    <p data-contact-status class="contact-status" aria-live="polite"></p>
  </form>
  </div></main>
  <footer class="footer" data-site-footer><div class="container"><div class="signature-rule footer-signature-rule" aria-hidden="true"></div><div class="footer-grid"><div class="footer-block"><h4>Victor Lane</h4><p data-site-footer-left>Portfolio focused on systems, collaboration, delivery, and creative execution with sanitized, reusable examples.</p></div><div class="footer-block"><h4>Links</h4><p data-site-footer-links><a href="/">Home</a><br><a href="/work/">Work</a><br><a href="/about/">About</a><br><a href="/contact/">Contact</a></p></div><div class="footer-block"><h4>Small Print</h4><p data-site-footer-small>© Victor Lane</p></div></div></div></footer><script src="/app.js" defer></script>
  <script is:inline define:vars={{ siteKey }}>
    if (!siteKey) {
      console.warn('TURNSTILE_SITE_KEY is empty; contact form submissions will fail Turnstile verification.');
    }

    const form = document.querySelector('[data-contact-form]');
    const status = document.querySelector('[data-contact-status]');
    const submit = document.querySelector('[data-contact-submit]');

    if (form && status) {
      form.addEventListener('submit', async (event) => {
        event.preventDefault();
        status.textContent = '';
        status.classList.remove('is-success', 'is-error');
        submit?.setAttribute('disabled', 'disabled');
        if (submit) submit.textContent = 'Sending…';

        const formData = new FormData(form);
        const payload = {
          inquiry_type: String(formData.get('inquiry_type') || 'general'),
          name: String(formData.get('name') || '').trim(),
          email: String(formData.get('email') || '').trim(),
          subject: String(formData.get('subject') || '').trim(),
          message: String(formData.get('message') || '').trim(),
          turnstileToken: String(formData.get('cf-turnstile-response') || '').trim()
        };

        try {
          const response = await fetch('/api/inquiries', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          if (!response.ok) {
            const result = await response.json().catch(() => ({}));
            status.textContent = String(result.error || 'Could not send inquiry. Please try again.');
            status.classList.add('is-error');
            return;
          }

          form.reset();
          status.textContent = 'Inquiry sent. Thank you.';
          status.classList.add('is-success');
        } catch {
          status.textContent = 'Network error. Please try again.';
          status.classList.add('is-error');
        } finally {
          submit?.removeAttribute('disabled');
          if (submit) submit.textContent = 'Send inquiry';
        }
      });
    }
  </script>
</body></html>
